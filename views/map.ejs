<!-- Incluye el encabezado de la página desde un archivo parcial, pasando el título como variable -->
<%- include("partials/header", { title: title }) %>

<!-- Incluye mensajes parciales, como notificaciones o alertas -->
<%- include("partials/mensajes") %>

<!-- Enlaces a Leaflet CSS y JS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

<!-- Hero Section Simple -->
<div class="hero-section position-relative overflow-hidden">
  <div class="hero-background position-absolute top-0 start-0 w-100 h-100"></div>
  <div class="hero-particles position-absolute top-0 start-0 w-100 h-100"></div>
  
  <div class="container-fluid position-relative" style="z-index: 2;">
    <div class="row align-items-center py-4">
      <div class="col-12">
        
        <!-- Título -->
        <div class="text-center text-white">
          <h1 class="display-5 fw-bold mb-2">
            Mapa de Apartamentos
          </h1>
          <p class="lead mb-0 opacity-90">
            Explora la ubicación de nuestras propiedades
          </p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Contenedor principal del mapa -->
<div class="map-container-wrapper">
  <div class="container-fluid px-4 py-4">
    <div class="map-container backdrop-blur rounded-4 shadow-lg border border-light border-opacity-25 overflow-hidden">
      
      <!-- Contenedor principal con sidebar y mapa -->
      <div class="container">
        
        <!-- Lista de apartamentos -->
        <div id="apartment-list">
          <h2>Lista de Apartamentos</h2>
          <!-- Genera la lista de apartamentos -->
          <% apartments.forEach(apartment => { %>
            <div class="apartment-item" data-id="<%= apartment._id %>">
              <strong><%= apartment.title %></strong>
              <small><%= apartment.location.municipality.nm %>, <%= apartment.location.province.nm %></small>
            </div>
          <% }) %>
        </div>
        
        <!-- Mapa donde se mostrarán los apartamentos -->
        <div id="map"></div>
      </div>
    </div>
  </div>
</div>
<link rel="stylesheet" href="/css/map.css">

<script>
  // Datos de apartamentos para el JavaScript externo
  window.apartmentsData = <%- JSON.stringify(apartments) %>;
</script>

<script src="/js/map.js"></script>

<!-- Incluye el pie de página desde un archivo parcial -->
<%- include("partials/footer") %>
